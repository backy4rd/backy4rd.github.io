{"version":3,"sources":["utils/filter.js","reducers/schoolYear.js","reducers/index.js","store.js","components/Sidebar/TagTitle/index.js","utils/unfocus.js","global.js","components/Sidebar/index.js","components/Sidebar/TemplateCard/index.js","components/Sidebar/MemberCard/index.js","api/index.js","components/Sidebar/SubjectCard/SubjectTag/index.js","components/Sidebar/SubjectCard/SubjectSearchList/index.js","utils/viToEn.js","components/Sidebar/SubjectCard/index.js","actions/schoolYear.js","components/Sidebar/SchoolYearSelector/index.js","components/Result/Schedule/index.js","components/Result/Navigator/index.js","components/Result/index.js","utils/createSchedules.js","App.js","index.js"],"names":["isGroupRegistrable","group","template","buoihoc","some","buoi","tiet","thu","groupMemberInRange","subjects","minMember","takenGroups","filteredSubjects","subjectId","filter","conlai","kihieu","groupInTemplate","hoaAnGroup","every","test","phong","khu2Group","untakenGroup","generateInitialState","semester","now","Date","currentMonth","getMonth","currentYear","getFullYear","year","toString","isHoaAn","combineReducers","schoolYear","state","action","type","payload","createStore","reducers","window","__REDUX_DEVTOOLS_EXTENSION__","TagTitle","props","title","tooltip","isDropdown","onDropdownIconClick","containDropdown","React","useState","open","setOpen","className","onClick","style","cursor","arrow","placement","onMouseEnter","onMouseLeave","unfocus","tmp","document","createElement","body","appendChild","focus","removeChild","global","Array","fill","map","Sidebar","onCreateButtonClick","isCalculating","setIsCalculating","setImmediate","Row","row","x","handleCellClick","isActive","y","TemplateCard","setIsDropdown","setTemplate","clone","arr","slice","handleThuClick","isContainActive","forEach","useEffect","clear","handleTietClick","member","setMember","value","onChange","e","target","onKeyPress","key","min","max","getHost","getDate","groupEndpoint","subjectEndpoint","getGroups","a","query","fetch","response","json","ok","Error","error","data","getSubjectName","getSubjectNames","SubjectTag","handleDeleteSubject","groups","setGroups","selectedGroup","setSelectedGroup","dsmh","subjectName","setSubjectName","isFounded","setIsFounded","useSelector","isUnmounted","useRef","api","fetchSubjectName","current","sort","fetchData","info","SubjectDropdown","selectedIndex","onOptionClick","onMouseOverOption","subjectid","i","onMouseOver","onMouseDown","viToEn","str","toLowerCase","replace","search","convertToSearchable","isSubjectExist","toUpperCase","Object","keys","SubjectCard","input","setInput","setSelectedIndex","querySubjects","setQuerySubjects","localStorage","getItem","split","getSavedSubjects","setSubjects","addMissingSubjects","setItem","join","_querySubjects","includes","onSubmit","preventDefault","onKeyDown","length","placeholder","index","changeIsHoaAn","SemesterSelection","store","dispatch","changeYear","changeSemester","CheckBox","CheckBoxOutlineBlank","colorMap","cell","rowSpan","backgroundColor","groupId","room","Schedule","schedule","scheduleMap","siso","createScheduleMap","Navigator","maxIndex","onPageChange","page","setPage","onBlur","width","Math","log10","colorPalette","Result","ref","schedules","currentIndex","setCurrentIndex","ceil","subjectIds","colors","splice","createColorMap","isDesktop","innerWidth","startIndex","message","fontWeight","textAlign","margin","scroll","offsetTop","forwardRef","findAllSchedule","result","templateClone","childSchedule","push","createSchedules","shuffledSubjects","shuffle","reduce","acc","cur","console","time","allSchedules","timeEnd","App","setSchedules","resultRef","ReactDOM","render","StrictMode","getElementById"],"mappings":"6UAAO,SAASA,EAAmBC,EAAOC,GACxC,OAAQD,EAAME,QAAQC,MAAK,SAACC,GAC1B,OAAOA,EAAKC,KAAKF,MAAK,SAACE,GAAD,OAAUJ,EAASI,EAAO,GAAGD,EAAKE,IAAM,SAI3D,SAASC,EAAmBC,GAA4C,IAAlCC,EAAiC,uDAArB,EAAGC,EAAkB,uDAAJ,GAClEC,EAAmB,GADmD,WAEjEC,GACTD,EAAiBC,GAAaJ,EAASI,GAAWC,QAChD,SAACb,GAAD,OACEA,EAAMc,QAAUL,GAAaC,EAAYE,KAAeZ,EAAMe,WAHpE,IAAK,IAAMH,KAAaJ,EAAW,EAAxBI,GAOX,OAAOD,EAGF,SAASK,EAAgBR,EAAUP,GAA6B,IAAnBS,EAAkB,uDAAJ,GAChE,IAAKT,EAAU,OAAOO,EACtB,IAAMG,EAAmB,GAF2C,WAIzDC,GACTD,EAAiBC,GAAaJ,EAASI,GAAWC,QAAO,SAACb,GACxD,OACED,EAAmBC,EAAOC,IAC1BS,EAAYE,KAAeZ,EAAMe,WAJvC,IAAK,IAAMH,KAAaJ,EAAW,EAAxBI,GASX,OAAOD,EAGF,SAASM,EAAWT,GACzB,IAAMG,EAAmB,GACzB,IAAK,IAAMC,KAAaJ,EACtBG,EAAiBC,GAAaJ,EAASI,GAAWC,QAAO,SAACb,GAAD,OACvDA,EAAME,QAAQgB,OAAM,SAACd,GAAD,OAAW,KAAKe,KAAKf,EAAKgB,aAIlD,OAAOT,EAGF,SAASU,EAAUb,GACxB,IAAMG,EAAmB,GACzB,IAAK,IAAMC,KAAaJ,EACtBG,EAAiBC,GAAaJ,EAASI,GAAWC,QAChD,SAACb,GAAD,OAAYA,EAAME,QAAQgB,OAAM,SAACd,GAAD,OAAW,KAAKe,KAAKf,EAAKgB,aAI9D,OAAOT,EAGF,SAASW,EAAad,EAAUE,GACrC,IAAMC,EAAgB,eAAQH,GADoB,WAQvCI,GACLF,EAAYE,KACdD,EAAiBC,GAAaJ,EAASI,GAAWC,QAAO,SAACb,GACxD,OAAOA,EAAMe,SAAWL,EAAYE,QAH1C,IAAK,IAAMA,KAAaF,EAAc,EAA3BE,GAQX,OAAOD,I,oDCxET,SAASY,IACP,IAKIC,EALEC,EAAM,IAAIC,KAEVC,EAAeF,EAAIG,WAAa,EAChCC,EAAcJ,EAAIK,cAexB,OAVEN,EADEG,GAAgB,GAAKA,GAAgB,GAC5B,EACFA,GAAgB,EACd,EAEA,EAMN,CACLI,MAJEJ,GAAgB,EAAUE,EAAc,EAChCA,GAGCG,WACXR,SAAUA,EAASQ,WACnBC,SAAS,GCnBEC,kBAAgB,CAC7BC,WDsBa,WAA6D,IAAzCC,EAAwC,uDAAhCb,IAAwBc,EAAQ,uCACzE,OAAQA,EAAOC,MACb,IAAK,cACH,OAAO,2BACFF,GADL,IAEEL,KAAMM,EAAOE,UAGjB,IAAK,kBACH,OAAO,2BACFH,GADL,IAEEZ,SAAUa,EAAOE,UAGrB,IAAK,mBACH,OAAO,2BACFH,GADL,IAEEH,QAASI,EAAOE,UAGpB,QACE,OAAOH,ME3CEI,gBACbC,EACAC,OAAOC,8BAAgCD,OAAOC,iC,kHCwCjCC,IAtCf,SAAkBC,GAAQ,IAEtBC,EAKED,EALFC,MACAC,EAIEF,EAJFE,QACAC,EAGEH,EAHFG,WACAC,EAEEJ,EAFFI,oBALqB,EAOnBJ,EADFK,uBANqB,WASCC,IAAMC,UAAS,GAThB,mBAShBC,EATgB,KASVC,EATU,KAWvB,OACE,sBAAKC,UAAU,YAAf,UACE,oBACEA,UAAU,QACVC,QAASP,EACTQ,MAAO,CAAEC,OAAQR,EAAkB,UAAY,QAHjD,SAKGJ,IAGFI,EACC,cAAC,IAAD,CACEK,UAAS,wBAAmBP,EAAa,WAAa,UACtDQ,QAASP,IAET,KACJ,cAAC,IAAD,CAASH,MAAOC,EAASY,OAAK,EAACC,UAAU,MAAMP,KAAMA,EAArD,SACE,cAAC,IAAD,CACEE,UAAU,YACVM,aAAc,kBAAMP,GAAQ,IAC5BQ,aAAc,kBAAMR,GAAQ,a,gCCvCvB,SAASS,IACtB,IAAIC,EAAMC,SAASC,cAAc,SACjCD,SAASE,KAAKC,YAAYJ,GAC1BA,EAAIK,QACJJ,SAASE,KAAKG,YAAYN,GAJ5B,mC,+BCAA,IAAMO,EAAS,CACb/D,SAAU,GACVE,YAAa,GACbT,SAAUuE,MAAM,GACbC,KAAK,GACLC,KAAI,kBAAMF,MAAM,GAAGC,MAAK,MAC3BhE,UAAW,GAGE8D,O,qHC6BAI,IA5Bf,YAA2C,IAAxBC,EAAuB,EAAvBA,oBAAuB,EACEzB,IAAMC,UAAS,GADjB,mBACjCyB,EADiC,KAClBC,EADkB,KAWxC,OACE,sBAAKvB,UAAU,UAAf,UACE,cAAC,IAAD,IACA,cAAC,IAAD,IACA,cAAC,IAAD,IACA,cAAC,IAAD,IAEA,yBACEA,UAAU,wBACVC,QAjBN,WACEsB,GAAiB,GAEjBC,GAAa,WACXH,IACAE,GAAiB,OAUjB,iDAIqBD,EAAgB,MAAQ,Y,8HCrBnD,SAASG,EAAT,GAA2C,IAA5BC,EAA2B,EAA3BA,IAAKC,EAAsB,EAAtBA,EAAGC,EAAmB,EAAnBA,gBACrB,OAAOF,EAAIP,KAAI,SAACU,EAAUC,GAAX,OACb,oBAAqB7B,QAAS,kBAAM2B,EAAgBD,EAAGG,IAAvD,SACE,cAAC,IAAD,CAAW9B,UAAS,oBAAe6B,EAAW,SAAW,OADlDF,EAAI,GAAKG,MAkFPC,IA5Ef,WAAwB,MAEclC,oBAAS,GAFvB,mBAEfJ,EAFe,KAEHuC,EAFG,OAGUnC,mBAC9BoB,MAAM,GACHC,KAAK,GACLC,KAAI,kBAAMF,MAAM,GAAGC,MAAK,OANP,mBAGfxE,EAHe,KAGLuF,EAHK,KAatB,SAASL,EAAgBD,EAAGG,GAC1B,IAAMI,EAAQxF,EAASyE,KAAI,SAACgB,GAAD,OAASA,EAAIC,MAAM,MAC9CF,EAAMP,GAAGG,IAAMI,EAAMP,GAAGG,GAExBG,EAAYC,GAed,SAASG,EAAeP,GACtB,IAAMI,EAAQxF,EAASyE,KAAI,SAACgB,GAAD,OAASA,EAAIC,MAAM,MACxCE,EAAkBJ,EAAMtF,MAAK,SAAC8E,GAAD,OAAUA,EAAII,MAEjDI,EAAMK,SAAQ,SAACb,GACbA,EAAII,GAAKQ,KAGXL,EAAYC,GAGd,OAlCAM,qBAAU,WACRxB,IAAOtE,SAAWA,IACjB,CAACA,IAiCF,sBACEsD,UAAS,sCAAiCP,EAAa,GAAK,UAD9D,UAGE,cAAC,IAAD,CACEF,MAAM,8BACNC,QA3DK,wHA4DLC,WAAYA,EACZC,oBAAqB,kBAAMsC,GAAevC,MAE5C,uBAAOS,MAAO,CAAEuC,MAAO,QAAvB,SACE,kCACE,+BACE,2CACA,oBAAIxC,QAAS,kBAAMoC,EAAe,IAAlC,wBACA,oBAAIpC,QAAS,kBAAMoC,EAAe,IAAlC,wBACA,oBAAIpC,QAAS,kBAAMoC,EAAe,IAAlC,wBACA,oBAAIpC,QAAS,kBAAMoC,EAAe,IAAlC,wBACA,oBAAIpC,QAAS,kBAAMoC,EAAe,IAAlC,wBACA,oBAAIpC,QAAS,kBAAMoC,EAAe,IAAlC,2BAED3F,EAASyE,KAAI,SAACO,EAAKC,GAAN,OACZ,+BACE,oBAAI1B,QAAS,kBA9CzB,SAAyB0B,GACvB,IAAMO,EAAQxF,EAASyE,KAAI,SAACgB,GAAD,OAASA,EAAIC,MAAM,MAE1CF,EAAMP,GAAG/E,MAAK,SAACiF,GAAD,OAAeA,KAC/BK,EAAMP,GAAKO,EAAMP,GAAGT,MAAK,GAEzBgB,EAAMP,GAAKO,EAAMP,GAAGT,MAAK,GAG3Be,EAAYC,GAqCiBQ,CAAgBf,IAAnC,SAAwCA,EAAI,IAC5C,cAACF,EAAD,CAAKC,IAAKA,EAAKC,EAAGA,EAAGC,gBAAiBA,MAF/BD,gB,sFCrCNI,IApCf,WAAyB,IAAD,EACclC,oBAAS,GADvB,mBACfJ,EADe,KACHuC,EADG,OAEMnC,mBAAS,GAFf,mBAEf8C,EAFe,KAEPC,EAFO,KAQtB,OAJAJ,qBAAU,WACRxB,IAAO9D,WAAayF,IACnB,CAACA,IAGF,sBAAK3C,UAAS,oCAA+BP,EAAa,GAAK,UAA/D,UACE,cAAC,IAAD,CACEF,MAAM,2BACNC,QAdK,oJAeLC,WAAYA,EACZC,oBAAqB,kBAAMsC,GAAevC,MAG5C,sBAAKO,UAAU,QAAf,UACE,uBACEjB,KAAK,SACL8D,MAAOF,EACPG,SAAU,SAACC,GAAD,OAAOH,EAAUG,EAAEC,OAAOH,QACpCI,WAAY,SAACF,GAAD,MAAkB,UAAVA,EAAEG,IAAkB1C,cAAY,QAEtD,uBACEqC,MAAOF,EACPG,SAAU,SAACC,GAAD,OAAOH,EAAUG,EAAEC,OAAOH,QACpC9D,KAAK,QACLoE,IAAI,IACJC,IAAI,e,0HCxCd,SAASC,IAGP,OAFoB,IAAIlF,MAAOmF,UAAY,GAGlC,+BAEA,+BAIX,IAAMC,EAAgBF,IAAY,UAC5BG,EAAkBH,IAAY,YAE7B,SAAeI,EAAtB,sC,4CAAO,WAAyBpG,EAAWmB,EAAMP,GAA1C,mBAAAyF,EAAA,6DACCC,EADD,gBACkBnF,EADlB,qBACmCP,GADnC,SAEkB2F,MAAM,GAAD,OAAIL,EAAJ,YAAqBlG,GAArB,OAAiCsG,IAFxD,cAECE,EAFD,gBAGcA,EAASC,OAHvB,UAGCA,EAHD,OAKAD,EAASE,GALT,sBAMG,IAAIC,MAAMF,EAAKG,OANlB,gCASEH,EAAKI,MATP,6C,sBAYA,SAAeC,EAAtB,kC,4CAAO,WAA8B9G,GAA9B,iBAAAqG,EAAA,sEACkBE,MAAMJ,EAAkB,IAAMnG,GADhD,cACCwG,EADD,gBAEcA,EAASC,OAFvB,UAECA,EAFD,OAIAD,EAASE,GAJT,sBAKG,IAAIC,MAAMF,EAAKG,OALlB,gCAQEH,EAAKI,MARP,4C,sBAWA,SAAeE,IAAtB,+B,4CAAO,8BAAAV,EAAA,sEACkBE,MAAMJ,GADxB,cACCK,EADD,gBAEcA,EAASC,OAFvB,UAECA,EAFD,OAIAD,EAASE,GAJT,sBAKG,IAAIC,MAAMF,EAAKG,OALlB,gCAQEH,EAAKI,MARP,4C,8CCyFQG,MAjHf,YAAyD,IAAnChH,EAAkC,EAAlCA,UAAWiH,EAAuB,EAAvBA,oBAAuB,EAC1BzE,mBAAS,IADiB,mBAC/C0E,EAD+C,KACvCC,EADuC,OAEZ3E,mBAAS,IAFG,mBAE/C4E,EAF+C,KAEhCC,EAFgC,OAGhB7E,mBAAS8E,EAAKtH,IAAc,OAHZ,mBAG/CuH,EAH+C,KAGlCC,EAHkC,OAIpBhF,oBAAS,GAJW,mBAI/CiF,EAJ+C,KAIpCC,EAJoC,KAMhDnG,EAAaoG,aAAY,SAACnG,GAAD,OAAWA,EAAMD,cAE1CqG,EAAcC,kBAAO,GAE3B1C,qBAAU,WAAM,4CACd,4BAAAkB,EAAA,+EAE2ByB,EAAmB9H,GAF9C,OAEUwG,EAFV,OAIIc,EAAKtH,GAAawG,EAClBgB,EAAehB,GALnB,gDASIgB,EAAe,kCATnB,0DADc,sBAcM,QAAhBD,GAdW,WAAD,wBAcaQ,KAE1B,IAEH5C,qBAAU,WAGR,OAFAyC,EAAYI,SAAU,EAEf,WACLJ,EAAYI,SAAU,SACfrE,IAAO/D,SAASI,UAChB2D,IAAO7D,YAAYE,MAG3B,IAEHmF,qBAAU,WAAM,4CACd,8BAAAkB,EAAA,+EAE2ByB,EACrB9H,EACAuB,EAAWJ,KACXI,EAAWX,UALjB,UAEU4F,EAFV,QAQQoB,EAAYI,QARpB,iDAYMnB,EADEtF,EAAWF,QACNpB,IAAiBuG,GAAUxG,GAE3BC,IAAkBuG,GAAUxG,GAGrC2D,IAAO/D,SAASI,GAAa6G,EAE7BM,EAAU,CAAC,oBAAF,mBAAeN,EAAK/C,KAAI,SAAC1E,GAAD,OAAWA,EAAMe,UAAQ8H,UAC1DZ,EAAiB,oBACjBK,GAAa,GArBjB,kDAuBIP,EAAU,CAAC,cACXO,GAAa,GAxBjB,2DADc,sBA6BdP,EAAU,CAAC,YA7BI,WAAD,wBA8Bde,KAEC,CAAC3G,IAEJ4D,qBAAU,WAEY,YAAlBiC,GACkB,cAAlBA,GACkB,KAAlBA,IAIoB,qBAAlBA,SACKzD,IAAO7D,YAAYE,GAE1B2D,IAAO7D,YAAYE,GAAaoH,KAGjC,CAACA,IAEJ,IAAMe,EAAI,UAAMnI,EAAN,cAAqBuH,GAE/B,OACE,sBAAK5E,UAAU,cAAf,UACE,qBAAKA,UAAU,oBAAf,SACG8E,EAAY,+BAAOU,IAAe,iCAASA,MAE9C,cAAC,IAAD,CACExF,UAAU,0BACVC,QAAS,kBAAMqE,EAAoBjH,MAErC,wBACE2C,UAAU,sBACV6C,MAAO4B,EACP3B,SAAU,SAACC,GAAD,OAAO2B,EAAiB3B,EAAEC,OAAOH,QAH7C,SAKG0B,EAAOpD,KAAI,SAAC1E,GAAD,OACV,iCAAqBA,GAARA,Y,cC3FRgJ,MArBf,SAAyBnG,GAAQ,IACvBrC,EAA8DqC,EAA9DrC,SAAUyI,EAAoDpG,EAApDoG,cAAeC,EAAqCrG,EAArCqG,cAAeC,EAAsBtG,EAAtBsG,kBAEhD,OACE,qBAAK5F,UAAU,sBAAf,SACG/C,EAASkE,KAAI,SAAC0E,EAAWC,GAAZ,OACZ,qBAEE9F,UAAS,sCACP8F,IAAMJ,EAAgB,SAAW,IAEnCK,YAAa,kBAAMH,EAAkBE,IACrCE,YAAa,kBAAML,EAAcG,IANnC,mBAQMD,EARN,cAQqBlB,EAAKkB,KAPnBA,SCbA,SAASI,EAAOC,GAoB3B,OADAA,GADAA,GAFAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GATAA,EAAMA,EAAIC,eASAC,QAAQ,kHAAsC,MAC9CA,QAAQ,0EAA0B,MAClCA,QAAQ,kCAAc,MACtBA,QAAQ,kHAAsC,MAC9CA,QAAQ,4EAA0B,MAClCA,QAAQ,oCAAc,MACtBA,QAAQ,UAAM,MAEdA,QAAQ,sCAAuC,KAC/CA,QAAQ,wBAAyB,I,UCNzCC,EAAS,GAGf,SAASC,EAAoBJ,GAC3B,OAAOD,EAAOC,GACXE,QAAQ,kBAAmB,IAC3BA,QAAQ,MAAO,KAGpB,SAASG,EAAevD,EAAQ/F,GAC9B,OAAOA,EAASL,MAAK,SAACS,GAAD,OAAeA,IAAc2F,EAAOwD,iBAU3DC,OAAOC,KAAK/B,GAAMpC,SAAQ,SAAClF,GACzBgJ,EAAOhJ,GAAaiJ,EAAoB3B,EAAKtH,OA6IhCsJ,IA1If,WAAwB,IAAD,EACK9G,mBAAS,IADd,mBACd+G,EADc,KACPC,EADO,OAEqBhH,oBAAU,GAF/B,mBAEd6F,EAFc,KAECoB,EAFD,OAGqBjH,mBAAS,IAH9B,mBAGdkH,EAHc,KAGCC,EAHD,OAIWnH,mBAflC,WACE,IAAM5C,EAAWkC,OAAO8H,aAAaC,QAAQ,YAC7C,OAAKjK,EAEEA,EAASkK,MAAM,KAFA,GAamBC,IAJpB,mBAIdnK,EAJc,KAIJoK,EAJI,KA6DrB,SAAS/C,EAAoBtB,GAC3BqE,EAAYpK,EAASK,QAAO,SAACD,GAAD,OAAeA,IAAc2F,MAqC3D,OA5FAR,qBAAU,WAAM,4CACd,4BAAAkB,EAAA,sEACyByB,IADzB,OACQtB,EADR,OAGE4C,OAAOC,KAAK7C,GAAUtB,SAAQ,SAAClF,GAC7BsH,EAAKtH,GAAawG,EAASxG,GAC3BgJ,EAAOhJ,GAAaiJ,EAAoB3B,EAAKtH,OALjD,4CADc,uBAAC,WAAD,wBAUdiK,KACC,IAGH9E,qBAAU,WACRrD,OAAO8H,aAAaM,QAAQ,WAAYtK,EAASuK,KAAK,QACrD,CAACvK,IAGJuF,qBAAU,WACR,GAAc,KAAVoE,EAAJ,CAKAE,GAAkB,GAElB,IAAMW,EAAiBhB,OAAOC,KAAK/B,GAChCrH,QAAO,SAACD,GAMP,OAJKgJ,EAAOhJ,KACVgJ,EAAOhJ,GAAaiJ,EAAoB3B,EAAKtH,KAI7CA,EAAUqK,SAASd,EAAMJ,gBACzBH,EAAOhJ,GAAWqK,SAASzB,EAAOW,OAGrCxE,MAAM,EAAG,IAEZ4E,EAAiBS,QApBfT,EAAiB,MAsBlB,CAACJ,IAkDF,sBAAK5G,UAAU,6BAAf,UACE,cAACX,EAAA,EAAD,CACEE,MAAM,+BACNI,iBAAiB,EACjBH,QA/HK,uMAkIP,uBAAMmI,SAvDV,SAA0B5E,GACxBA,EAAE6E,iBACY,KAAVhB,IACAL,EAAeK,EAAO3J,KAE1BoK,EAAY,GAAD,mBAAKpK,GAAL,CAAe2J,EAAMJ,iBAChCK,EAAS,OAiD2B7G,UAAU,sBAA5C,UACE,uBACE6C,MAAO+D,EACP9D,SAAU,SAACC,GAAD,OAAO8D,EAAS9D,EAAEC,OAAOH,QACnCgF,UAjCR,SAA4B9E,GAY1B,IAVa,cAAVA,EAAEG,KAAiC,QAAVH,EAAEG,MAC5BwC,EAAgBqB,EAAce,OAAS,IAEvChB,EAAiBpB,EAAgB,GACjC3C,EAAE6E,kBAEU,YAAV7E,EAAEG,KAAqBwC,GAAiB,IAC1CoB,EAAiBpB,EAAgB,GACjC3C,EAAE6E,kBAEU,UAAV7E,EAAEG,MAAsC,IAAnBwC,EAAsB,CAC7C,GAAIa,EAAeQ,EAAcrB,GAAgBzI,GAAW,OAE5D4J,EAAS,IACTQ,EAAY,GAAD,mBAAKpK,GAAL,CAAe8J,EAAcrB,MACxC3C,EAAE6E,mBAiBEG,YAAY,2BACZhJ,KAAK,SAEP,uBAAOA,KAAK,SAAS8D,MAAM,YAE3B,cAAC,EAAD,CACE5F,SAAU8J,EACVrB,cAAeA,EACfC,cAvDR,SAAuBqC,GACjBzB,EAAeQ,EAAciB,GAAQ/K,KAIzC4J,EAAS,IACTQ,EAAY,GAAD,mBAAKpK,GAAL,CAAe8J,EAAciB,QAkDlCpC,kBA/CR,SAA2BoC,GACzBlB,EAAiBkB,SAkDf,8BACG/K,EAASkE,KAAI,SAAC9D,EAAWyI,GAAZ,OACZ,cAAC,EAAD,CAEEzI,UAAWA,EAAUmJ,cACrBlC,oBAAqBA,GAFhBjH,a,oFCvJV,SAAS4K,EAAcvJ,GAC5B,MAAO,CACLK,KAAM,mBACNC,QAASN,G,MC2CEwJ,IA/Cf,WACE,IAAM1J,EAAOwG,aAAY,SAACnG,GAAD,OAAWA,EAAMD,WAAWJ,QAC/CP,EAAW+G,aAAY,SAACnG,GAAD,OAAWA,EAAMD,WAAWX,YACnDS,EAAUsG,aAAY,SAACnG,GAAD,OAAWA,EAAMD,WAAWF,WAExD,OACE,sBAAKsB,UAAU,qBAAf,UACE,uDACA,yBACE6C,MAAOrE,EACPsE,SAAU,SAACC,GAAD,OAAOoF,IAAMC,SDvBxB,SAAoB5J,GACzB,MAAO,CACLO,KAAM,cACNC,QAASR,GCoB2B6J,CAAWtF,EAAEC,OAAOH,SAFtD,UAIE,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,uBACA,wBAAQA,MAAM,OAAd,0BAGF,sDACA,yBACEA,MAAO5E,EACP6E,SAAU,SAACC,GAAD,OAAOoF,IAAMC,SD/BxB,SAAwBnK,GAC7B,MAAO,CACLc,KAAM,kBACNC,QAASf,GC4B2BqK,CAAevF,EAAEC,OAAOH,SAF1D,UAIE,wBAAQA,MAAM,IAAd,eACA,wBAAQA,MAAM,IAAd,eACA,wBAAQA,MAAM,IAAd,kBAGF,sBAAK7C,UAAU,QAAf,UACE,+CAECtB,EACC,cAAC6J,EAAA,EAAD,CAAUtI,QAAS,kBAAMkI,IAAMC,SAASH,GAAc,OAEtD,cAACO,EAAA,EAAD,CACEvI,QAAS,kBAAMkI,IAAMC,SAASH,GAAc,e,+skRCrBxD,SAASxG,EAAT,GAAoC,IAArBC,EAAoB,EAApBA,IAAKC,EAAe,EAAfA,EAAG8G,EAAY,EAAZA,SACrB,OAAO/G,EAAIP,KAAI,SAACuH,EAAM5G,GACpB,GAAkB,SAAd4G,EAAK3J,KACT,MAAkB,UAAd2J,EAAK3J,KAAyB,gCAAY4C,GAAZ,OAAgBG,IAGhD,qBAEE6G,QAASD,EAAKC,QACdzI,MAAO,CAAE0I,gBAAiBH,EAASC,EAAKrL,YACxC2C,UAAU,sBAJZ,UAME,mBAAGA,UAAU,aAAb,SACE,2CAAY0I,EAAKrL,UAAjB,YAA8BqL,EAAKG,aAErC,mBAAG7I,UAAU,eAAb,SAA6B2E,EAAK+D,EAAKrL,aACvC,4BAAIqL,EAAKI,OACT,4BAAIJ,EAAK/F,WAXX,UACUhB,GADV,OACcG,OA8CLiH,MA9Bf,YAAkD,IAA9BC,EAA6B,EAA7BA,SAAUP,EAAmB,EAAnBA,SACtBQ,GADyC,EAATjB,MAhDxC,SAA2BgB,GACzB,IAAM7H,EAAMF,MAAM,GACfC,KAAK,GACLC,KAAI,kBAAMF,MAAM,GAAGC,KAAK,CAAEnC,KAAM,aAHA,WAKxB1B,GACT2L,EAAS3L,GAAWV,QAAQ4F,SAAQ,SAAC1F,GACnCsE,EAAItE,EAAKC,KAAK,GAAK,GAAGD,EAAKE,IAAM,GAAK,CACpCgC,KAAM,OACN4J,QAAS9L,EAAKC,KAAKgL,OACnBzK,UAAWA,EACXwL,QAASG,EAAS3L,GAAWG,OAC7BsL,KAAMjM,EAAKgB,MACX8E,OAAO,GAAD,OAAKqG,EAAS3L,GAAWE,OAAzB,YAAmCyL,EAAS3L,GAAW6L,OAG/DrM,EAAKC,KAAKsF,MAAM,GAAGG,SAAQ,SAACzF,GAC1BqE,EAAIrE,EAAO,GAAGD,EAAKE,IAAM,GAAK,CAAEgC,KAAM,eAZ5C,IAAK,IAAM1B,KAAa2L,EAAW,EAAxB3L,GAiBX,OAAO8D,EA2BagI,CAAkBH,IAEtC,OACE,qBAAKhJ,UAAU,WAAf,SACE,kCACE,gCACE,+BACE,2CACA,4CACA,4CACA,4CACA,4CACA,4CACA,iDAGJ,gCACGiJ,EAAY9H,KAAI,SAACO,EAAKC,GAAN,OACf,+BACE,6BAAKA,EAAI,IACT,cAACF,EAAD,CAAKC,IAAKA,EAAKC,EAAGA,EAAG8G,SAAUA,MAFxB9G,c,cCCNyH,MApEf,YAAkE,IAA7CpJ,EAA4C,EAA5CA,UAAWgI,EAAiC,EAAjCA,MAAOqB,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,aAAgB,EACvCzJ,mBAASmI,GAD8B,mBACxDuB,EADwD,KAClDC,EADkD,KAwB/D,OArBAhH,qBAAU,kBAAMgH,EAAQxB,KAAQ,CAACA,IAsB/B,sBAAKhI,UAAS,oBAAeA,GAAwB,IAArD,UACE,wBACEA,UAAqB,IAAVgI,EAAc,UAAY,GACrC/H,QAAS,kBAAMqJ,EAAa,IAF9B,2BAMA,wBACEtJ,UAAqB,IAAVgI,EAAc,UAAY,GACrC/H,QAAS,kBAAMqJ,EAAatB,EAAQ,EAAI,EAAI,EAAIA,EAAQ,IAF1D,6BAMA,iCACE,uBACEhI,UAAU,QACVjB,KAAK,SACL8D,MAAO0G,EAAO,EACdzG,SAAU,SAACC,GAAD,OAAOyG,EAAQzG,EAAEC,OAAOH,QAClCI,WAvCR,SAA8BF,GACd,UAAVA,EAAEG,OAEDH,EAAEC,OAAOH,MAAQ,IAAME,EAAEC,OAAOH,MAAQwG,EAC3CG,EAAQxB,GAERsB,GAAcvG,EAAEC,OAAOH,OAEzBrC,gBAgCMiJ,OA7BR,SAA2B1G,IACpBA,EAAEC,OAAOH,MAAQ,IAAME,EAAEC,OAAOH,MAAQwG,EAC3CG,EAAQxB,GAERsB,GAAcvG,EAAEC,OAAOH,QA0BnB3C,MAAO,CAAEwJ,MAAsC,KAA5BC,KAAKC,MAAMP,GAAY,MAR9C,IAUIA,EAAW,KAEf,wBACErJ,UAAWgI,IAAUqB,EAAW,UAAY,GAC5CpJ,QAAS,kBACPqJ,EAAatB,EAAQ,EAAIqB,EAAWA,EAAWrB,EAAQ,IAH3D,iBAQA,wBACEhI,UAAWgI,IAAUqB,EAAW,UAAY,GAC5CpJ,QAAS,kBAAMqJ,EAAaD,IAF9B,2B,OCvDAQ,G,MAAe,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAgBF,SAASC,EAAT,EAA+BC,GAAM,IAAnBC,EAAkB,EAAlBA,UAAkB,EACMnK,mBAAS,GADf,mBAC3BoK,EAD2B,KACbC,EADa,KAKlC,GAFA1H,qBAAU,kBAAM0H,EAAgB,KAAI,CAACF,KAEhCD,EAAK,MAAM,IAAI/F,MAAM,0BAC1B,GAAkB,OAAdgG,EAAoB,OAAO,qBAAKhK,UAAU,WAE9C,IAAMqJ,EAAWM,KAAKQ,KAAKH,EAAUlC,OAVzB,IAU2C,EACjDW,EAtBR,SAAwB2B,GACtB,IAAMC,EAAM,UAAOR,GACbpB,EAAW,GAMjB,OAJA2B,EAAW7H,SAAQ,SAAClF,GAAe,IAAD,EAChCoL,EAASpL,GAAT,UAAsBgN,EAAOC,OAAO,EAAG,UAAvC,aAAsB,EAAsB,MAGvC7B,EAcU8B,CAAe9D,OAAOC,KAAK1F,IAAO/D,WAC7CuN,EAAYrL,OAAOsL,WAAa,IAChCC,EAbM,GAaOT,EAYnB,IAAMU,EACiB,IAArBX,EAAUlC,OAAV,UACOkC,EAAUlC,OADjB,4DAEI,+DAEN,OACE,sBAAK9H,UAAU,SAAS+J,IAAKA,EAA7B,UAEE,6BAAKY,IAcL,qBAAK3K,UAAU,YAAf,SACGgK,EAAU5H,MAAMsI,EAAYA,EAhDvB,IAgD2CvJ,KAAI,SAAC6H,EAAUlD,GAAX,OACnD,qCACE,mBAAG5F,MAAO,CAAE0K,WAAY,OAAQC,UAAW,SAAUC,OAAQ,GAA7D,SACGJ,EAAa5E,EAAI,IAEpB,cAAC,EAAD,CAEEkD,SAAUA,EACVP,SAAUA,EACVT,MAAO0C,EAAa5E,EAAI,GAHnBA,WASZkE,EAAUlC,OA/DH,GAgEN,cAAC,EAAD,CACEE,MAAOiC,EACPZ,SAAUA,EACVC,aApDR,SAAuBtB,GACrBkC,EAAgBlC,GAEZwC,EACFT,EAAI1E,QAAQ0F,OAAO,EAAG,GAEtB5L,OAAO4L,OAAO,EAAGhB,EAAI1E,QAAQ2F,YA+CzBhL,UAAW,6BAGb,gCAMOJ,UAAMqL,WAAWnB,G,iDC5GhC,SAASoB,EAAgBjO,EAAUP,GAAW,IAAD,EACvB+J,OAAOC,KAAKzJ,GAAzBI,EADoC,oBAE3C,IAAKA,EAAW,MAAO,CAAC,IAExB,IAJ2C,EAIrC8N,EAAS,GAJ4B,cAMvBlO,EAASI,IANc,yBAMhCZ,EANgC,QAOzC,IAAKa,IAA0Bb,EAAOC,GAAW,iBAEjD,IAAM0O,EAAgB1O,EAASyE,KAAI,SAACO,GAAD,OAASA,EAAIU,MAAM,MAGtD3F,EAAME,QAAQ4F,SAAQ,SAAC1F,GACrBA,EAAKC,KAAKyF,SACR,SAACzF,GAAD,OAAWsO,EAActO,EAAO,GAAGD,EAAKE,IAAM,IAAK,QAKvD,IAAMK,EAAmBE,IAAuBL,EAAUmO,GAgB1D,cAfOhO,EAAiBC,GAGD6N,EAAgB9N,EAAkBgO,GAG1C7I,SAAQ,SAAC8I,GACtBF,EAAOG,KAAP,2BAAejO,EAAYZ,GAAU4O,OAQnCF,EAAOrD,OAAS,IAAW,CAAN,EAAOqD,QAAhC,GA7BF,2BAAyC,CAAC,IAAD,yDANE,8BAsC3C,OAAOA,EAGM,SAASI,EAAgBtO,GACtC,GAAqC,IAAjCwJ,OAAOC,KAAKzJ,GAAU6K,OAAc,MAAO,GAU/C,IAAM0D,EAAmBC,IAAQhF,OAAOC,KAAKzJ,IAAWyO,QAAO,SAACC,EAAKC,GAEnE,OADAD,EAAIC,GAAOH,IAAQxO,EAAS2O,IACrBD,IACN,IAEHE,QAAQC,KAAK,aACb,IAAMC,EAAeb,EACnBM,EACAvK,MAAM,GACHC,KAAK,GACLC,KAAI,kBAAMF,MAAM,GAAGC,MAAK,OAK7B,OAHA2K,QAAQG,QAAQ,aAGTP,IAAQM,G,MC/BFE,MA5Bf,WAAgB,IAAD,EACqBrM,IAAMC,SAAS,MADpC,mBACNmK,EADM,KACKkC,EADL,KAEPC,EAAYvM,IAAMsF,OAAO,MAkB/B,OACE,sBAAKlF,UAAU,MAAf,UACE,cAACoB,EAAA,EAAD,CAASC,oBAlBb,WAAgC,IACxBpE,EAA+C+D,IAA/C/D,SAAUE,EAAqC6D,IAArC7D,YAAaT,EAAwBsE,IAAxBtE,SAAUQ,EAAc8D,IAAd9D,UAEvCD,EAAWK,IAAoBL,EAAUE,GACzCF,EAAWK,IAA0BL,EAAUC,EAAWC,GAG1D,IAAM6M,EAAYuB,EAFlBtO,EAAWK,IAAuBL,EAAUP,EAAUS,IAItD+O,EAAalC,GAET7K,OAAOsL,WAAa,KACtB0B,EAAU9G,QAAQ0F,OAAO,EAAG,MAO5B,cAAC,EAAD,CAAQf,UAAWA,EAAWD,IAAKoC,Q,QC3BzCC,IAASC,OACP,cAAC,IAAD,CAAUlE,MAAOA,IAAjB,SACE,cAAC,IAAMmE,WAAP,UACE,cAAC,EAAD,QAGJ5L,SAAS6L,eAAe,W","file":"static/js/main.d51a8a05.chunk.js","sourcesContent":["export function isGroupRegistrable(group, template) {\n  return !group.buoihoc.some((buoi) => {\n    return buoi.tiet.some((tiet) => template[tiet - 1][buoi.thu - 2]);\n  });\n}\n\nexport function groupMemberInRange(subjects, minMember = 1, takenGroups = {}) {\n  const filteredSubjects = {};\n  for (const subjectId in subjects) {\n    filteredSubjects[subjectId] = subjects[subjectId].filter(\n      (group) =>\n        group.conlai >= minMember || takenGroups[subjectId] === group.kihieu,\n    );\n  }\n\n  return filteredSubjects;\n}\n\nexport function groupInTemplate(subjects, template, takenGroups = {}) {\n  if (!template) return subjects;\n  const filteredSubjects = {};\n\n  for (const subjectId in subjects) {\n    filteredSubjects[subjectId] = subjects[subjectId].filter((group) => {\n      return (\n        isGroupRegistrable(group, template) ||\n        takenGroups[subjectId] === group.kihieu\n      );\n    });\n  }\n\n  return filteredSubjects;\n}\n\nexport function hoaAnGroup(subjects) {\n  const filteredSubjects = {};\n  for (const subjectId in subjects) {\n    filteredSubjects[subjectId] = subjects[subjectId].filter((group) =>\n      group.buoihoc.every((buoi) => !/HA/.test(buoi.phong)),\n    );\n  }\n\n  return filteredSubjects;\n}\n\nexport function khu2Group(subjects) {\n  const filteredSubjects = {};\n  for (const subjectId in subjects) {\n    filteredSubjects[subjectId] = subjects[subjectId].filter(\n      (group) => !group.buoihoc.every((buoi) => !/HA/.test(buoi.phong)),\n    );\n  }\n\n  return filteredSubjects;\n}\n\nexport function untakenGroup(subjects, takenGroups) {\n  const filteredSubjects = { ...subjects };\n  // for (const subjectId in subjects) {\n  //   filteredSubjects[subjectId] = subjects[subjectId].filter((group) => {\n  //     return takenGroups[subjectId].includes(group.kihieu);\n  //   });\n  // }\n\n  for (const subjectId in takenGroups) {\n    if (takenGroups[subjectId]) {\n      filteredSubjects[subjectId] = subjects[subjectId].filter((group) => {\n        return group.kihieu === takenGroups[subjectId];\n      });\n    }\n  }\n\n  return filteredSubjects;\n}\n","function generateInitialState() {\n  const now = new Date();\n\n  const currentMonth = now.getMonth() + 1;\n  const currentYear = now.getFullYear();\n\n  let semester, year;\n\n  if (currentMonth <= 4 || currentMonth >= 11) {\n    semester = 2;\n  } else if (currentMonth <= 6) {\n    semester = 3;\n  } else {\n    semester = 1;\n  }\n\n  if (currentMonth >= 7) year = currentYear + 1;\n  else year = currentYear;\n\n  return {\n    year: year.toString(),\n    semester: semester.toString(),\n    isHoaAn: false,\n  };\n}\n\nexport default function schoolYear(state = generateInitialState(), action) {\n  switch (action.type) {\n    case 'CHANGE_YEAR':\n      return {\n        ...state,\n        year: action.payload,\n      };\n\n    case 'CHANGE_SEMESTER':\n      return {\n        ...state,\n        semester: action.payload,\n      };\n\n    case 'CHANGE_IS_HOA_AN':\n      return {\n        ...state,\n        isHoaAn: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport schoolYear from './schoolYear'\n\nexport default combineReducers({\n  schoolYear,\n})","import { createStore } from 'redux';\n\nimport reducers from './reducers';\n\nexport default createStore(\n  reducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n);\n","import React from 'react';\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\n\nimport './TagTitle.css';\n\nfunction TagTitle(props) {\n  const {\n    title,\n    tooltip,\n    isDropdown,\n    onDropdownIconClick,\n    containDropdown = true,\n  } = props;\n\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <div className=\"tag-title\">\n      <h3\n        className=\"title\"\n        onClick={onDropdownIconClick}\n        style={{ cursor: containDropdown ? 'pointer' : 'auto' }}\n      >\n        {title}\n      </h3>\n\n      {containDropdown ? (\n        <ArrowForwardIosIcon\n          className={`dropdown-icon ${isDropdown ? 'dropdown' : 'pullup'}`}\n          onClick={onDropdownIconClick}\n        />\n      ) : null}\n      <Tooltip title={tooltip} arrow placement=\"top\" open={open}>\n        <HelpOutlineIcon\n          className=\"help-icon\"\n          onMouseEnter={() => setOpen(true)}\n          onMouseLeave={() => setOpen(false)}\n        />\n      </Tooltip>\n    </div>\n  );\n}\n\nexport default TagTitle;\n","export default function unfocus() {\n  var tmp = document.createElement('input');\n  document.body.appendChild(tmp);\n  tmp.focus();\n  document.body.removeChild(tmp);\n}\n","const global = {\n  subjects: {},\n  takenGroups: {},\n  template: Array(9)\n    .fill(0)\n    .map(() => Array(6).fill(false)),\n  minMember: 1,\n};\n\nexport default global;\n","import React from 'react';\n\nimport SubjectCard from './SubjectCard';\nimport SchoolYearSelector from './SchoolYearSelector';\nimport TemplateCard from './TemplateCard';\nimport MemberCard from './MemberCard';\n// import AreaCard from './AreaCard';\n\nimport './Sidebar.css';\n\nfunction Sidebar({ onCreateButtonClick }) {\n  const [isCalculating, setIsCalculating] = React.useState(false);\n\n  function handleCreateButtonClick() {\n    setIsCalculating(true);\n    // make sure sidebar rerendered before run cpu intensive task\n    setImmediate(() => {\n      onCreateButtonClick();\n      setIsCalculating(false);\n    });\n  }\n  return (\n    <div className=\"sidebar\">\n      <SchoolYearSelector />\n      <SubjectCard />\n      <TemplateCard />\n      <MemberCard />\n      {/* <AreaCard /> */}\n      <button\n        className=\"sidebar__generate-btn\"\n        onClick={handleCreateButtonClick}\n      >\n        Tạo thời khóa biểu{isCalculating ? '...' : ''}\n      </button>\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import React, { useState, useEffect } from 'react';\n\nimport TagTitle from '../TagTitle';\nimport ClearIcon from '@material-ui/icons/Clear';\n\nimport global from '../../../global';\n\nimport './TemplateCard.css';\n\nconst tooltip = `Những tiết học được đánh dấu sẽ không được sắp`;\n\nfunction Row({ row, x, handleCellClick }) {\n  return row.map((isActive, y) => (\n    <td key={x + '' + y} onClick={() => handleCellClick(x, y)}>\n      <ClearIcon className={`tick-icon ${isActive ? 'active' : ''}`} />\n    </td>\n  ));\n}\n\nfunction TemplateCard() {\n  // const template = useSelector((state) => state.template);\n  const [isDropdown, setIsDropdown] = useState(false);\n  const [template, setTemplate] = useState(\n    Array(9)\n      .fill(0)\n      .map(() => Array(6).fill(false)),\n  );\n\n  useEffect(() => {\n    global.template = template;\n  }, [template]);\n\n  function handleCellClick(x, y) {\n    const clone = template.map((arr) => arr.slice(0));\n    clone[x][y] = !clone[x][y];\n\n    setTemplate(clone);\n  }\n\n  function handleTietClick(x) {\n    const clone = template.map((arr) => arr.slice(0));\n\n    if (clone[x].some((isActive) => !isActive)) {\n      clone[x] = clone[x].fill(true);\n    } else {\n      clone[x] = clone[x].fill(false);\n    }\n\n    setTemplate(clone);\n  }\n\n  function handleThuClick(y) {\n    const clone = template.map((arr) => arr.slice(0));\n    const isContainActive = clone.some((row) => !row[y]);\n\n    clone.forEach((row) => {\n      row[y] = isContainActive;\n    });\n\n    setTemplate(clone);\n  }\n\n  return (\n    <div\n      className={`sidebar__card template-card ${isDropdown ? '' : 'pulled'}`}\n    >\n      <TagTitle\n        title=\"Lọc tiết học\"\n        tooltip={tooltip}\n        isDropdown={isDropdown}\n        onDropdownIconClick={() => setIsDropdown(!isDropdown)}\n      />\n      <table style={{ clear: 'both' }}>\n        <tbody>\n          <tr>\n            <th>Tiết</th>\n            <th onClick={() => handleThuClick(0)}>Thứ 2</th>\n            <th onClick={() => handleThuClick(1)}>Thứ 3</th>\n            <th onClick={() => handleThuClick(2)}>Thứ 4</th>\n            <th onClick={() => handleThuClick(3)}>Thứ 5</th>\n            <th onClick={() => handleThuClick(4)}>Thứ 6</th>\n            <th onClick={() => handleThuClick(5)}>Thứ 7</th>\n          </tr>\n          {template.map((row, x) => (\n            <tr key={x}>\n              <th onClick={() => handleTietClick(x)}>{x + 1}</th>\n              <Row row={row} x={x} handleCellClick={handleCellClick} />\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default TemplateCard;\n","import React, { useState, useEffect } from 'react';\n\nimport TagTitle from '../TagTitle';\n\nimport unfocus from '../../../utils/unfocus';\nimport global from '../../../global';\n\nimport './MemberCard.css';\n\nconst tooltip = `Những nhóm có sỉ số ít hơn được chỉ định sẽ không được sắp`;\n\nfunction TemplateCard() {\n  const [isDropdown, setIsDropdown] = useState(false);\n  const [member, setMember] = useState(0);\n\n  useEffect(() => {\n    global.minMember = +member;\n  }, [member]);\n\n  return (\n    <div className={`sidebar__card member-card ${isDropdown ? '' : 'pulled'}`}>\n      <TagTitle\n        title=\"Lọc sĩ số\"\n        tooltip={tooltip}\n        isDropdown={isDropdown}\n        onDropdownIconClick={() => setIsDropdown(!isDropdown)}\n      />\n\n      <div className=\"range\">\n        <input\n          type=\"number\"\n          value={member}\n          onChange={(e) => setMember(e.target.value)}\n          onKeyPress={(e) => (e.key === 'Enter' ? unfocus() : null)}\n        />\n        <input\n          value={member}\n          onChange={(e) => setMember(e.target.value)}\n          type=\"range\"\n          min=\"1\"\n          max=\"50\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default TemplateCard;\n","function getHost() {\n  const isEndOfDyno = new Date().getDate() < 15;\n\n  if (isEndOfDyno) {\n    return 'https://htql-2.herokuapp.com';\n  } else {\n    return 'https://htql-1.herokuapp.com';\n  }\n}\n\nconst groupEndpoint = getHost() + '/groups';\nconst subjectEndpoint = getHost() + '/subjects';\n\nexport async function getGroups(subjectId, year, semester) {\n  const query = `?year=${year}&semester=${semester}`;\n  const response = await fetch(`${groupEndpoint}/${subjectId}${query}`);\n  const json = await response.json();\n\n  if (!response.ok) {\n    throw new Error(json.error);\n  }\n\n  return json.data;\n}\n\nexport async function getSubjectName(subjectId) {\n  const response = await fetch(subjectEndpoint + '/' + subjectId);\n  const json = await response.json();\n\n  if (!response.ok) {\n    throw new Error(json.error);\n  }\n\n  return json.data;\n}\n\nexport async function getSubjectNames() {\n  const response = await fetch(subjectEndpoint);\n  const json = await response.json();\n\n  if (!response.ok) {\n    throw new Error(json.error);\n  }\n\n  return json.data;\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport ClearIcon from '@material-ui/icons/Clear';\n\nimport * as filter from '../../../../utils/filter';\nimport * as api from '../../../../api';\nimport global from '../../../../global';\nimport dsmh from '../../../../dsmh.json';\n\nimport './SubjectTag.css';\n\nfunction SubjectTag({ subjectId, handleDeleteSubject }) {\n  const [groups, setGroups] = useState([]);\n  const [selectedGroup, setSelectedGroup] = useState('');\n  const [subjectName, setSubjectName] = useState(dsmh[subjectId] || '...');\n  const [isFounded, setIsFounded] = useState(true);\n\n  const schoolYear = useSelector((state) => state.schoolYear);\n\n  const isUnmounted = useRef(false);\n\n  useEffect(() => {\n    async function fetchSubjectName() {\n      try {\n        const response = await api.getSubjectName(subjectId);\n\n        dsmh[subjectId] = response;\n        setSubjectName(response);\n\n        // handle error\n      } catch (err) {\n        setSubjectName('Không xác định');\n      }\n    }\n\n    if (subjectName === '...') fetchSubjectName();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    isUnmounted.current = false;\n\n    return () => {\n      isUnmounted.current = true;\n      delete global.subjects[subjectId];\n      delete global.takenGroups[subjectId];\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await api.getGroups(\n          subjectId,\n          schoolYear.year,\n          schoolYear.semester,\n        );\n\n        if (isUnmounted.current) return;\n\n        let data;\n        if (schoolYear.isHoaAn) {\n          data = filter.khu2Group(response)[subjectId];\n        } else {\n          data = filter.hoaAnGroup(response)[subjectId];\n        }\n\n        global.subjects[subjectId] = data;\n\n        setGroups(['Tất cả', ...data.map((group) => group.kihieu).sort()]);\n        setSelectedGroup('Tất cả');\n        setIsFounded(true);\n      } catch (err) {\n        setGroups(['Not Found']);\n        setIsFounded(false);\n      }\n    }\n\n    setGroups(['Loading']);\n    fetchData();\n    // eslint-disable-next-line\n  }, [schoolYear]);\n\n  useEffect(() => {\n    if (\n      selectedGroup === 'Loading' ||\n      selectedGroup === 'Not Found' ||\n      selectedGroup === ''\n    )\n      return;\n\n    if (selectedGroup === 'Tất cả') {\n      delete global.takenGroups[subjectId];\n    } else {\n      global.takenGroups[subjectId] = selectedGroup;\n    }\n    // eslint-disable-next-line\n  }, [selectedGroup]);\n\n  const info = `${subjectId} - ${subjectName}`;\n\n  return (\n    <div className=\"subject-tag\">\n      <div className=\"subject-tag__info\">\n        {isFounded ? <span>{info}</span> : <strike>{info}</strike>}\n      </div>\n      <ClearIcon\n        className=\"subject-tag__clear-icon\"\n        onClick={() => handleDeleteSubject(subjectId)}\n      />\n      <select\n        className=\"subject-tag__groups\"\n        value={selectedGroup}\n        onChange={(e) => setSelectedGroup(e.target.value)}\n      >\n        {groups.map((group) => (\n          <option key={group}>{group}</option>\n        ))}\n      </select>\n    </div>\n  );\n}\n\nexport default SubjectTag;\n","import React from 'react';\n\nimport dsmh from '../../../../dsmh.json';\n\nimport './SubjectSearchList.css';\n\nfunction SubjectDropdown(props) {\n  const { subjects, selectedIndex, onOptionClick, onMouseOverOption } = props;\n\n  return (\n    <div className=\"subject-search-list\">\n      {subjects.map((subjectid, i) => (\n        <div\n          key={subjectid}\n          className={`subject-search-list__option ${\n            i === selectedIndex ? 'active' : ''\n          }`}\n          onMouseOver={() => onMouseOverOption(i)}\n          onMouseDown={() => onOptionClick(i)}\n        >\n          {`${subjectid} - ${dsmh[subjectid]}`}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default SubjectDropdown;\n","export default function viToEn(str) {\n    str = str.toLowerCase();\n//     We can also use this instead of from line 11 to line 17\n//     str = str.replace(/\\u00E0|\\u00E1|\\u1EA1|\\u1EA3|\\u00E3|\\u00E2|\\u1EA7|\\u1EA5|\\u1EAD|\\u1EA9|\\u1EAB|\\u0103|\\u1EB1|\\u1EAF|\\u1EB7|\\u1EB3|\\u1EB5/g, \"a\");\n//     str = str.replace(/\\u00E8|\\u00E9|\\u1EB9|\\u1EBB|\\u1EBD|\\u00EA|\\u1EC1|\\u1EBF|\\u1EC7|\\u1EC3|\\u1EC5/g, \"e\");\n//     str = str.replace(/\\u00EC|\\u00ED|\\u1ECB|\\u1EC9|\\u0129/g, \"i\");\n//     str = str.replace(/\\u00F2|\\u00F3|\\u1ECD|\\u1ECF|\\u00F5|\\u00F4|\\u1ED3|\\u1ED1|\\u1ED9|\\u1ED5|\\u1ED7|\\u01A1|\\u1EDD|\\u1EDB|\\u1EE3|\\u1EDF|\\u1EE1/g, \"o\");\n//     str = str.replace(/\\u00F9|\\u00FA|\\u1EE5|\\u1EE7|\\u0169|\\u01B0|\\u1EEB|\\u1EE9|\\u1EF1|\\u1EED|\\u1EEF/g, \"u\");\n//     str = str.replace(/\\u1EF3|\\u00FD|\\u1EF5|\\u1EF7|\\u1EF9/g, \"y\");\n//     str = str.replace(/\\u0111/g, \"d\");\n    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\n    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\n    str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\n    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\n    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\n    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\n    str = str.replace(/đ/g, \"d\");\n    // Some system encode vietnamese combining accent as individual utf-8 characters\n    str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); // Huyền sắc hỏi ngã nặng \n    str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); // Â, Ê, Ă, Ơ, Ư\n    return str;\n}","import React, { useState, useEffect } from 'react';\n\nimport SubjectTag from './SubjectTag';\nimport TagTitle from '../TagTitle';\nimport SubjectSearchList from './SubjectSearchList';\n\nimport * as api from '../../../api';\nimport viToEn from '../../../utils/viToEn';\n\nimport dsmh from '../../../dsmh.json';\n\nimport './SubjectCard.css';\n\nconst search = {};\nconst tooltip = `Chọn lại \"Tất cả\" để chỉ định nhóm cụ thể, hệ thống sẽ sắp thời khóa biểu xoay quanh nhóm đó`;\n\nfunction convertToSearchable(str) {\n  return viToEn(str)\n    .replace(/[^a-zA-Z0-9 ]+/g, '')\n    .replace(/\\s+/, ' ');\n}\n\nfunction isSubjectExist(target, subjects) {\n  return subjects.some((subjectId) => subjectId === target.toUpperCase());\n}\n\nfunction getSavedSubjects() {\n  const subjects = window.localStorage.getItem('subjects');\n  if (!subjects) return [];\n\n  return subjects.split(',');\n}\n\nObject.keys(dsmh).forEach((subjectId) => {\n  search[subjectId] = convertToSearchable(dsmh[subjectId]);\n});\n\nfunction SubjectCard() {\n  const [input, setInput] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [querySubjects, setQuerySubjects] = useState([]);\n  const [subjects, setSubjects] = useState(getSavedSubjects());\n\n  // add new subjects to dsmh\n  useEffect(() => {\n    async function addMissingSubjects() {\n      const response = await api.getSubjectNames();\n\n      Object.keys(response).forEach((subjectId) => {\n        dsmh[subjectId] = response[subjectId];\n        search[subjectId] = convertToSearchable(dsmh[subjectId]);\n      });\n    }\n\n    addMissingSubjects();\n  }, []);\n\n  // store subject ids\n  useEffect(() => {\n    window.localStorage.setItem('subjects', subjects.join(','));\n  }, [subjects]);\n\n  // handle input change (show search list)\n  useEffect(() => {\n    if (input === '') {\n      setQuerySubjects([]);\n      return;\n    }\n\n    setSelectedIndex(-1);\n\n    const _querySubjects = Object.keys(dsmh)\n      .filter((subjectId) => {\n        // update search object if dsmh has new subject\n        if (!search[subjectId]) {\n          search[subjectId] = convertToSearchable(dsmh[subjectId]);\n        }\n\n        return (\n          subjectId.includes(input.toUpperCase()) ||\n          search[subjectId].includes(viToEn(input))\n        );\n      })\n      .slice(0, 30);\n\n    setQuerySubjects(_querySubjects);\n    //\n  }, [input]);\n\n  function handleAddSubject(e) {\n    e.preventDefault();\n    if (input === '') return;\n    if (isSubjectExist(input, subjects)) return;\n\n    setSubjects([...subjects, input.toUpperCase()]);\n    setInput('');\n  }\n\n  function handleDeleteSubject(target) {\n    setSubjects(subjects.filter((subjectId) => subjectId !== target));\n  }\n\n  function onOptionClick(index) {\n    if (isSubjectExist(querySubjects[index], subjects)) {\n      return;\n    }\n\n    setInput('');\n    setSubjects([...subjects, querySubjects[index]]);\n  }\n\n  function onMouseOverOption(index) {\n    setSelectedIndex(index);\n  }\n\n  function handleInputKeydown(e) {\n    if (\n      (e.key === 'ArrowDown' || e.key === 'Tab') &&\n      selectedIndex < querySubjects.length - 1\n    ) {\n      setSelectedIndex(selectedIndex + 1);\n      e.preventDefault();\n    }\n    if (e.key === 'ArrowUp' && selectedIndex > -1) {\n      setSelectedIndex(selectedIndex - 1);\n      e.preventDefault();\n    }\n    if (e.key === 'Enter' && selectedIndex !== -1) {\n      if (isSubjectExist(querySubjects[selectedIndex], subjects)) return;\n\n      setInput('');\n      setSubjects([...subjects, querySubjects[selectedIndex]]);\n      e.preventDefault();\n    }\n  }\n\n  return (\n    <div className=\"sidebar__card subject-card\">\n      <TagTitle\n        title=\"Chọn học phần\"\n        containDropdown={false}\n        tooltip={tooltip}\n      />\n\n      <form onSubmit={handleAddSubject} className=\"subject-card__input\">\n        <input\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleInputKeydown}\n          placeholder=\"Mã học phần\"\n          type=\"text\"\n        ></input>\n        <input type=\"submit\" value=\"Thêm\"></input>\n\n        <SubjectSearchList\n          subjects={querySubjects}\n          selectedIndex={selectedIndex}\n          onOptionClick={onOptionClick}\n          onMouseOverOption={onMouseOverOption}\n        />\n      </form>\n\n      <div>\n        {subjects.map((subjectId, i) => (\n          <SubjectTag\n            key={subjectId}\n            subjectId={subjectId.toUpperCase()}\n            handleDeleteSubject={handleDeleteSubject}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default SubjectCard;\n","export function changeYear(year) {\n  return {\n    type: 'CHANGE_YEAR',\n    payload: year,\n  };\n}\n\nexport function changeSemester(semester) {\n  return {\n    type: 'CHANGE_SEMESTER',\n    payload: semester,\n  };\n}\n\nexport function changeIsHoaAn(isHoaAn) {\n  return {\n    type: 'CHANGE_IS_HOA_AN',\n    payload: isHoaAn,\n  };\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { CheckBox, CheckBoxOutlineBlank } from '@material-ui/icons';\n\nimport store from '../../../store';\nimport {\n  changeYear,\n  changeSemester,\n  changeIsHoaAn,\n} from '../../../actions/schoolYear';\n\nimport './SchoolYearSelector.css';\n\nfunction SemesterSelection() {\n  const year = useSelector((state) => state.schoolYear.year);\n  const semester = useSelector((state) => state.schoolYear.semester);\n  const isHoaAn = useSelector((state) => state.schoolYear.isHoaAn);\n\n  return (\n    <div className=\"semester-selection\">\n      <span>Năm học: </span>\n      <select\n        value={year}\n        onChange={(e) => store.dispatch(changeYear(e.target.value))}\n      >\n        <option value=\"2019\">2018-2019</option>\n        <option value=\"2020\">2019-2020</option>\n        <option value=\"2021\">2020-2021</option>\n        <option value=\"2022\">2021-2022</option>\n        <option value=\"2023\">2022-2023</option>\n        <option value=\"2024\">2023-2024</option>\n        <option value=\"2025\">2024-2025</option>\n        <option value=\"2026\">2025-2026</option>\n      </select>\n\n      <span>Học kỳ: </span>\n      <select\n        value={semester}\n        onChange={(e) => store.dispatch(changeSemester(e.target.value))}\n      >\n        <option value=\"1\">1</option>\n        <option value=\"2\">2</option>\n        <option value=\"3\">3</option>\n      </select>\n\n      <div className=\"hoaAn\">\n        <span>Hòa An: </span>\n\n        {isHoaAn ? (\n          <CheckBox onClick={() => store.dispatch(changeIsHoaAn(false))} />\n        ) : (\n          <CheckBoxOutlineBlank\n            onClick={() => store.dispatch(changeIsHoaAn(true))}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SemesterSelection;\n","import React from 'react';\n\nimport dsmh from '../../../dsmh.json';\n\nimport './Schedule.css';\n\nfunction createScheduleMap(schedule) {\n  const map = Array(9)\n    .fill(0)\n    .map(() => Array(6).fill({ type: 'empty' }));\n\n  for (const subjectId in schedule) {\n    schedule[subjectId].buoihoc.forEach((buoi) => {\n      map[buoi.tiet[0] - 1][buoi.thu - 2] = {\n        type: 'data',\n        rowSpan: buoi.tiet.length,\n        subjectId: subjectId,\n        groupId: schedule[subjectId].kihieu,\n        room: buoi.phong,\n        member: `${schedule[subjectId].conlai}/${schedule[subjectId].siso}`,\n      };\n\n      buoi.tiet.slice(1).forEach((tiet) => {\n        map[tiet - 1][buoi.thu - 2] = { type: 'null' };\n      });\n    });\n  }\n\n  return map;\n}\n\nfunction Row({ row, x, colorMap }) {\n  return row.map((cell, y) => {\n    if (cell.type === 'null') return undefined;\n    if (cell.type === 'empty') return <td key={`${x}${y}`}></td>;\n\n    return (\n      <td\n        key={`${x}${y}`}\n        rowSpan={cell.rowSpan}\n        style={{ backgroundColor: colorMap[cell.subjectId] }}\n        className=\"schedule__cell-data\"\n      >\n        <p className=\"subject-id\">\n          <strong>{`${cell.subjectId} ${cell.groupId}`}</strong>\n        </p>\n        <p className=\"subject-name\">{dsmh[cell.subjectId]}</p>\n        <p>{cell.room}</p>\n        <p>{cell.member}</p>\n      </td>\n    );\n  });\n}\n\nfunction Schedule({ schedule, colorMap, index }) {\n  const scheduleMap = createScheduleMap(schedule);\n\n  return (\n    <div className=\"schedule\">\n      <table>\n        <thead>\n          <tr>\n            <th>Tiết</th>\n            <th>Thứ 2</th>\n            <th>Thứ 3</th>\n            <th>Thứ 4</th>\n            <th>Thứ 5</th>\n            <th>Thứ 6</th>\n            <th>Thứ 7</th>\n          </tr>\n        </thead>\n        <tbody>\n          {scheduleMap.map((row, x) => (\n            <tr key={x}>\n              <th>{x + 1}</th>\n              <Row row={row} x={x} colorMap={colorMap} />\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default Schedule;\n","import React, { useEffect, useState } from 'react';\n\nimport unfocus from '../../../utils/unfocus';\n\nimport './Navigator.css';\n\nfunction Navigator({ className, index, maxIndex, onPageChange }) {\n  const [page, setPage] = useState(index);\n\n  useEffect(() => setPage(index), [index]);\n\n  function handlePagePressEnter(e) {\n    if (e.key !== 'Enter') return;\n\n    if (+e.target.value < 0 || +e.target.value > maxIndex) {\n      setPage(index);\n    } else {\n      onPageChange(+e.target.value);\n    }\n    unfocus();\n  }\n\n  function handlePageUnfocus(e) {\n    if (+e.target.value < 0 || +e.target.value > maxIndex) {\n      setPage(index);\n    } else {\n      onPageChange(+e.target.value);\n    }\n  }\n\n  return (\n    <div className={`navigator ${className ? className : ''}`}>\n      <button\n        className={index === 0 ? 'disable' : ''}\n        onClick={() => onPageChange(0)}\n      >\n        đầu\n      </button>\n      <button\n        className={index === 0 ? 'disable' : ''}\n        onClick={() => onPageChange(index - 1 < 0 ? 0 : index - 1)}\n      >\n        trước\n      </button>\n      <span>\n        <input\n          className=\"index\"\n          type=\"number\"\n          value={page + 1}\n          onChange={(e) => setPage(e.target.value)}\n          onKeyPress={handlePagePressEnter}\n          onBlur={handlePageUnfocus}\n          style={{ width: ~~(Math.log10(maxIndex) + 1) * 8 }}\n        />\n        /{maxIndex + 1}\n      </span>\n      <button\n        className={index === maxIndex ? 'disable' : ''}\n        onClick={() =>\n          onPageChange(index + 1 > maxIndex ? maxIndex : index + 1)\n        }\n      >\n        sau\n      </button>\n      <button\n        className={index === maxIndex ? 'disable' : ''}\n        onClick={() => onPageChange(maxIndex)}\n      >\n        cuối\n      </button>\n    </div>\n  );\n}\n\nexport default Navigator;\n","import React, { useState, useEffect } from 'react';\n\nimport Schedule from './Schedule';\nimport Navigator from './Navigator';\n\nimport global from '../../global';\n\nimport './Result.css';\n\nconst colorPalette = [\n  '#ACDDDE',\n  '#CBE4F9',\n  '#CDF5F6',\n  '#D7D8BF',\n  '#E3E3F2',\n  '#EFF9DA',\n  '#F7D8BA',\n  '#F9D8D6',\n  '#F9EBDF',\n  '#FFD3FD',\n  '#FFFDDB',\n];\n\nfunction createColorMap(subjectIds) {\n  const colors = [...colorPalette];\n  const colorMap = {};\n\n  subjectIds.forEach((subjectId) => {\n    colorMap[subjectId] = colors.splice(0, 1)?.[0];\n  });\n\n  return colorMap;\n}\n\nconst limit = 10;\n\nfunction Result({ schedules }, ref) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => setCurrentIndex(0), [schedules]);\n\n  if (!ref) throw new Error('must have ref property');\n  if (schedules === null) return <div className=\"result\"></div>;\n\n  const maxIndex = Math.ceil(schedules.length / limit) - 1;\n  const colorMap = createColorMap(Object.keys(global.subjects));\n  const isDesktop = window.innerWidth > 700;\n  const startIndex = currentIndex * limit;\n\n  function onPageChange2(index) {\n    setCurrentIndex(index);\n\n    if (isDesktop) {\n      ref.current.scroll(0, 0);\n    } else {\n      window.scroll(0, ref.current.offsetTop);\n    }\n  }\n\n  const message =\n    schedules.length !== 0\n      ? `${schedules.length} lịch học được tìm thấy`\n      : 'Không tìm thấy lịch học phù hợp';\n\n  return (\n    <div className=\"result\" ref={ref}>\n      {/* {(isDesktop && currentIndex === 0) || !isDesktop ? ( */}\n      <h2>{message}</h2>\n      {/* ) : null} */}\n\n      {/* {schedules.length > limit ? ( */}\n      {/*   (isDesktop && currentIndex !== 0) || !isDesktop ? ( */}\n      {/*     <Navigator */}\n      {/*       index={currentIndex} */}\n      {/*       maxIndex={maxIndex} */}\n      {/*       onPageChange={onPageChange1} */}\n      {/*       className={'result__top-navigator'} */}\n      {/*     /> */}\n      {/*   ) : null */}\n      {/* ) : null} */}\n\n      <div className=\"schedules\">\n        {schedules.slice(startIndex, startIndex + limit).map((schedule, i) => (\n          <>\n            <p style={{ fontWeight: 'bold', textAlign: 'center', margin: 0 }}>\n              {startIndex + i + 1}\n            </p>\n            <Schedule\n              key={i}\n              schedule={schedule}\n              colorMap={colorMap}\n              index={startIndex + i + 1}\n            />\n          </>\n        ))}\n      </div>\n\n      {schedules.length > limit ? (\n        <Navigator\n          index={currentIndex}\n          maxIndex={maxIndex}\n          onPageChange={onPageChange2}\n          className={'result__bottom-navigator'}\n        />\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n}\n\nexport default React.forwardRef(Result);\n","import shuffle from 'shuffle-array';\nimport * as filter from './filter';\n\nfunction findAllSchedule(subjects, template) {\n  const [subjectId] = Object.keys(subjects);\n  if (!subjectId) return [{}];\n\n  const result = [];\n\n  for (const group of subjects[subjectId]) {\n    if (!filter.isGroupRegistrable(group, template)) continue;\n\n    const templateClone = template.map((row) => row.slice(0));\n\n    // Fill buoihoc to template clone\n    group.buoihoc.forEach((buoi) => {\n      buoi.tiet.forEach(\n        (tiet) => (templateClone[tiet - 1][buoi.thu - 2] = true),\n      );\n    });\n\n    // Filter conflict group and remove current subjectId in subjects clone\n    const filteredSubjects = filter.groupInTemplate(subjects, templateClone);\n    delete filteredSubjects[subjectId];\n\n    // Recur to get child schedules\n    const childSchedules = findAllSchedule(filteredSubjects, templateClone);\n\n    // Loop through all child schedule and append current subject to it\n    childSchedules.forEach((childSchedule) => {\n      result.push({ [subjectId]: group, ...childSchedule });\n    });\n    // for (const childSchedule of childSchedules) {\n    //   result.push({ [key]: subject, ...childSchedule });\n    //   if (result.length >= 10e3) return result;\n    // }\n\n    // strict numbers of result\n    if (result.length > 1e5) return result;\n  }\n\n  return result;\n}\n\nexport default function createSchedules(subjects) {\n  if (Object.keys(subjects).length === 0) return [];\n\n  // for (const subjectId in subjects) {\n  //   subjects[subjectId].sort((a, b) => {\n  //     return Math.abs(a.siso - 25 - a.conlai) < Math.abs(b.siso - 25 - b.conlai)\n  //       ? -1\n  //       : 1;\n  //   });\n  // }\n\n  const shuffledSubjects = shuffle(Object.keys(subjects)).reduce((acc, cur) => {\n    acc[cur] = shuffle(subjects[cur]);\n    return acc;\n  }, {});\n\n  console.time('calculate');\n  const allSchedules = findAllSchedule(\n    shuffledSubjects,\n    Array(9)\n      .fill(0)\n      .map(() => Array(6).fill(false)),\n  );\n  console.timeEnd('calculate');\n\n  // return allSchedules;\n  return shuffle(allSchedules);\n}\n","import React from 'react';\n\nimport Sidebar from './components/Sidebar';\nimport Result from './components/Result';\n\nimport global from './global';\nimport createSchedules from './utils/createSchedules';\nimport * as filter from './utils/filter';\n\nimport './App.css';\n\nfunction App() {\n  const [schedules, setSchedules] = React.useState(null);\n  const resultRef = React.useRef(null);\n\n  function onCreateButtonClick() {\n    let { subjects, takenGroups, template, minMember } = global;\n\n    subjects = filter.untakenGroup(subjects, takenGroups);\n    subjects = filter.groupMemberInRange(subjects, minMember, takenGroups);\n    subjects = filter.groupInTemplate(subjects, template, takenGroups);\n\n    const schedules = createSchedules(subjects);\n\n    setSchedules(schedules);\n\n    if (window.innerWidth > 700) {\n      resultRef.current.scroll(0, 0);\n    }\n  }\n\n  return (\n    <div className=\"app\">\n      <Sidebar onCreateButtonClick={onCreateButtonClick} />\n      <Result schedules={schedules} ref={resultRef} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\n\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}